<!-- JetBrainsAdmin.html -->
<!-- Created by carolclark on 4/14/17 for project Support. -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>JetBrains Administration</title>
	<link rel="stylesheet" type="text/css" href="../css/technical.css" />
	<style type="text/css">
		span.webButton {
			color: #e68a00;
		}
	</style>
</head>
<body>
<!-- @navhead "DevSupport.html" "DevSupport" "History_Support.html" -->
<h1>JetBrains Administration</h1>

<!-- @topicList "JetBrainsAdmin" "Contents" -->
	<!-- @topicItem "Development Overview" "#Overview_" "0" "brief overview of development tools &amp; strategy" -->
	<!-- @topicItem "Team Tools Configuration" "#TeamToolsConfiguration_" "0" "" -->
	<!-- @topicItem "Admin Tasks and References" "#AdminTasksAndReferences_" "0" "" -->
	<!-- @topicItem "JetBrains Adoption" "#JetBrainsAdoption_" "0" "tools &amp; IDEs; costs and benefits" -->
	<!-- @topicItem "Install TeamTools" "#InstallTeamTools_" "0" "" -->
	<!-- @topicSep -->
	<!-- @topicGroup "References" "8" -->
		<!-- @topicItem "JetBrains" "http://www.jetbrains.com" "0" "JetBrains home" -->
		<!-- @topicItem "REST API" "https://confluence.jetbrains.com/display/TCD10/REST+API" "0" "" -->
		<!-- @topicItem "Build Script Interaction with TeamCity" "https://confluence.jetbrains.com/display/TCD10/Build+Script+Interaction+with+TeamCity" "0" "additional control for builds" -->
		<!-- @topicItem "Install and Configure the TeamCity Server" "https://confluence.jetbrains.com/display/TCD10/Installing+and+Configuring+the+TeamCity+Server" "0" "contents page" -->
		<!-- @topicItem "TeamCity Server icon" "https://hub.docker.com/r/jetbrains/teamcity-server/" "0" "" -->
		<!-- @topicItem "Troubleshooting TeamCity Installation" "https://confluence.jetbrains.com/display/TCD10/Installing+and+Configuring+the+TeamCity+Server#InstallingandConfiguringtheTeamCityServer-TroubleshootingTeamCityInstallation" "0" "" -->
		<!-- @topicItem "Scheduling Tasks with Cron Jobs" "https://code.tutsplus.com/tutorials/scheduling-tasks-with-cron-jobs--net-8800_" "0" "" -->
		<!-- @topicItem "TeamCity: Backup with maintainDB tool" "https://confluence.jetbrains.com/display/TCD10/Creating+Backup+via+maintainDB+command-line+tool" "0" "" -->
<!-- @/topicList -->

<h2 class="promote" id="Overview_">JetBrains Development Overview</h2>
	<p class="sl5">JetBrains: primary tools for our development process</p>
		<p class="sl6">available IDE's for development languages:</p><ul class="sl6">
			<li>IntelliJ IDEA: flagship development environment for Java<ul>
				<li>best support for related languages, project structure with modules, ...</li>
				<li>also includes at least part of several other IDEs; we have an all-products license for JetBrains IDEs</li>
				<li>better choice for bash, html, AppleScript</li>
			</ul></li>
			<li>AppCode (already in use): primary support for Cocoa/Objective-C(++); plugins for unix and AppleScript<ul>
				<li>project structure based on Xcode =&gt; no module support, limitations for other plug-ins and features</li>
			</ul></li>
			<li>other languages/IDEs<ul>
				<li class="blurb">many of these are also available, at least at some level, from IntelliJ IDEA</li>
				<li>WebStorm (for html and javascript - we are currently using AppCode with sed(!!) instead of javascript)</li>
				<li>PyCharm with Django; PHPStorm for Website indices; DataGrip for internal databases; MPS for DSL development</li>
			</ul></li>
		</ul>
		<p class="sl6">Team Tools for managing workflow and development process:</p><ul class="sl6">
			<li>YouTrack: issue tracking; agile development</li>
			<li>TeamCity (previously in use): Continuous Integration</li>
			<li>UpSource: code review</li>
			<li>Hub, aka HubRing, to tie it all together</li>
		</ul>
		<p class="sl6">We expect to use:</p><ul class="sl6">
			<li>The complete team tool suite</li>
			<li>AppCode IDE for Cocoa projects; IntelliJ IDEA by default for other languages; add specialized products for other languages as indicated</li>
	</ul>

<h4 id="Agile_">Agile Development</h4>
	<p>Our process is very similar to standard test-first agile development,
	but with a more relaxed approach toward time management and deadlines. Instead 'sprints' to provide time pressure,
	we use 'gaggles', with a time estimate, not a deadline.</p>
		<h4>Gaggle</h4><ul>
			<li>We expect 'Gaggle' to contribute to a less stressful development environment</li>
			<li>Date estimates for a Gaggle are established based on card estimates, which are adjusted when indicated
				toward the actual time needed</li>
			<li>We expect to learn to make better estimates of time required as we use this technique</li>
			<li>For larger tasks as indicated, a required-dependency task is used to gather information and estimate</li>
			<li>YouTrack's 'fix version' field is intended to identify cards for a version number and a scrum.<ul>
				<li>We prefer to establish the version number when the product is ready for 'release',
					as recommended by <a href="https://datasift.github.io/gitflow/IntroducingGitFlow.html">GitFlow</a>,
					on which our <a href="Git.html#Branches_Releases_">versioning plan</a> is based.</li>
				<li>Field 'fix version' target is complete form vMaj.min.fix</li>
					<li>New field 'gaggle' identifies cards (geese?) for a Gaggle<ul>
						<li>'current', 'next', etc. identify current and future gaggles (if it fits)</li>
					</ul></li>
			</ul></li>
		</ul>

<!-- @marker "Team Tools Configuration" -->
<h2 class="promote">Team Tools Configuration</h2>
<!-- @topicList "Team Tools Configuration" "TeamToolsConfiguration_" -->
	<!-- @topicItem "HubRing:  Configuration" "#HubRingConfiguration_" "0" "" -->
	<!-- @topicItem "YouTrack:  Configuration" "#YouTrackConfiguration_" "0" "" -->
	<!-- @topicItem "UpSource:  Configuration" "#UpSourceConfiguration_" "0" "" -->
	<!-- @topicItem "TeamCity:  Configuration" "#TeamCityConfiguration_" "0" "" -->
<!-- @/topicList -->

<!-- @marker "HubRing: Configuration" -->
<h3 id="HubRingConfiguration_">HubRing: Configuration</h3><ul>
	<li class="ital">see <a href="https://www.jetbrains.com/help/hub/2017.2/Configuration-Parameters.html">Configure System Properties</a></li>
	</ul>
	<p class="sl6">Users</p><ul class="sl6">
		<li>add 'carolclark':<ul>
			<li>click our gravitar image</li>
			<li>add and verify email address</li>
			<li>do not force change password</li>
		</ul></li>
	</ul>
	<p class="sl6">Roles</p><ul class="sl6">
		<li>add role 'All Projects Admin'<ul>
			<li>Permissions<ul>
				<li>match permissions of role Project Admin<ul>
					<li>Project: read, update</li>
					<li>Project Role: add, remove</li>
					<li>Role: read</li>
					<li>User: create; read self; read user; update self</li>
					<li>User Group: create, delete, read, update</li>
				</ul></li>
			</ul></li>
		</ul></li>
	</ul>
	<p class="sl6">Groups</p><ul class="sl6">
		<li>add group All Projucts Admin with role all-projects-admin</li>
	</ul>
	<p class="sl6">Users</p><ul class="sl6">
		<li>add user carolclark to group All Projects Admin</li>
	</ul>
	<p class="sl6">Auth Modules</p><ul class="sl6">
		<li>Hub: Built-in Authorization<ul>
			<li>under server url, follow instructions to obtain and enter Client ID and Client Secret from GitHub</li>
			<li class="depr">Registration: Disabled (admin must add new users)</li>
			<li>test login combinations</li>
		</ul></li>
	</ul>
	<p class="sl6">GitHub</p><ul class="sl6">
		<li>Server URL: https://github.com</li>
		<li>User Creation: Disabled</li>
		<li>Enable Module</li>
		<li>under server url, follow instructions to obtain and enter Client ID and Client Secret from GitHub</li>
		<li>enable</li>
	</ul>
	<p class="sl6">System Settings</p><ul class="sl6">
		<li>login timeout 12 hours</li>
		<li>remember me for 1 year</li>
	</ul>
	<p class="sl6">Backups</p><ul class="sl6">
		<li>to '/Volumes/Mavericks-1/JetBrains_backups</li>
		<li>zip format</li>
		<li>every day at 2 AM</li>
		<li>rotation 5</li>
	</ul>
	<p class="sl6">SMTP</p><ul class="sl6">
		<li>host smtp.cox.net; from carolclark@cox.net</li>
		<li>user carolclark; password: cox</li>
		<li>Security and Authorization: user name 'carolclark'; password cox</li>
		<li>send test message; enable notification</li>
	</ul>
	<p class="sl6">Java virtual machine (JVM) Options</p><ul class="sl6">
		<li>no changes</li>
	</ul>

<!-- @marker "YouTrack: Configuration" -->
<h3 id="YouTrackConfiguration_">YouTrack: Configuration</h3>
	<p class="sl5">Server Settings</p>
		<p class="sl6">Global</p><ul class="sl6">
		<li>verify license shown; if not, fetch and copy</li>
		<li>Default Timezone: verify</li>
		<li>Date Fields Format: ISO date (2000.12.31)</li>
		<li class="dq">enable email notifications; provide host (smtp.cox.net), username, password</li>
		</ul>
	<p class="sl5">Global Project-Related Settings</p>
		<p class="sl6">Access Settings</p><ul class="sl6">
			<li><strong>Backups</strong>: to 'Mavericks-1/JetBrains_backups/Hub; zip format; every day at 2 AM; rotation 5</li>
			<li><strong>VCS configurations</strong></li>
			<li><strong>Access Management</strong><ul>
				<li>add user carolclark to Group Project Admin</li>
			</ul></li>
			<li><strong>VCS configurations</strong>: new GitHub integration</li>
		</ul>
	<p class="sl5">Java virtual machine (JVM) Options</p>
		<p class="sl6">stop YouTrack service</p><ul class="sl6">
			<li><span class="mono">cd &lt;path/to/YouTrack&gt;; bin/youtrack.sh stop</span></li>
			<li>check Activity Monitor for other "YouTrack" processes; kill if found</li>
		</ul>
		<p class="sl6">if necessary, create file youtrack.jvmoptions</p>
		<p class="sl6">install youtrack.jvmoptions</p><ul class="sl6">
			<li>@ &lt;path/to/YouTrack&gt;/conf</li>
		</ul>
		<p class="sl6">copy "&lt;YouTrackDirectory&gt;/conf/youtrack.jvmoptions.dist"</p><ul class="sl6">
			<li>to Jetbrains/YouTrack/youtrack.jvmoptions</li>
		</ul>
		<p class="sl6">configure JVM</p><ul class="sl6">
				<li><span class="mono">Maximum Metaspace memory: -XX:MaxMetaspaceSize 250m</span></li>
				<li><span class="mono">Maximum Java heap size: -Xmx 1024m or 1g</span> </li>
				<li>also if needed for performance:<ul>
					<li><span class="mono">Minimum Metaspace memory: -XX:MetaspaceSize 250m</span> </li>
				</ul></li>
			<li>configure general options<ul>
				<li>jetbrains.youtrack.mailLimit: 25</li>
				<li>for additional configuration options, see
					<a href="https://www.jetbrains.com/help/youtrack/standalone/2017.1/YouTrack-Java-Start-Parameters.html">General Parameters</a></li>
			</ul></li>
		</ul>
		<p class="sl6">install youtrack.jvmoptions</p><ul class="sl6">
			<li>@ &lt;path/to/YouTrack&gt;/conf</li>
		</ul>
	<p class="sl6">start YouTrack service:</p><ul class="sl6">
		<li><span class="mono">cd &lt;path/to/YouTrack&gt;; bin/youtrack.sh start</span></li>
</ul>

<!-- @marker "UpSource: Configuration" -->
<h3 id="UpSourceConfiguration_">UpSource: Configuration</h3>
	<p class="blurb">see
		<a href="https://blog.jetbrains.com/upsource/2015/09/09/mysterious-build-system-setting/">Mysterious "Build System" Setting</a></p>

<!-- @marker "TeamCity: Configuration" -->
<h3 id="TeamCityConfiguration_">TeamCity: Configuration</h3>

	<!-- @marker "Store Project Settings in Version Control" -->
	<h5 id='StoreProjectSettingsinVCS_'>Store Project Settings in Version Control</h5><ul>
	<li><a href="https://confluence.jetbrains.com/display/TCD10/Storing+Project+Settings+in+Version+Control">
		Store Project Settings in Version Control</a></li>
	</ul>

	<!-- @marker "Set TeamCity's Data Directory" -->
	<h5 style="padding-top: 10px;"><strong>Set TeamCity's Data Directory</strong></h5><ul>
		<li>Create New File for Startup Properties<ul>
			<li class="mono">echo "teamcity.data.path=/Volumes/Servers/jb/TeamCity/BuildServer"
				&gt; /Volumes/Servers/jb/TeamCity/TeamCity/conf/teamcity-startup.properties</li>
		</ul></li>
	</ul>

<!-- @marker "Admin Tasks and References" -->
<h2 class="promote">Admin Tasks and References</h2>
<!-- @topicList "Admin Tasks and References" "AdminTasksAndReferences_" -->
	<!-- @topicItem "Create Project" "#CreateProject_" "0" "" -->
	<!-- @topicItem "Command-Line Tools" "#CommandLineTools_" "0" "" -->
	<!-- @topicItem "Moving Projects to Another Server" "#MovingServer_" "0" "" -->
	<!-- @topicItem "Sort a Card's Subtasks" "#SortACardsSubtasks_" "0" "" -->
	<!-- @topicItem "Install Build Agent" "#InstallBuildAgent_" "0" "" -->
<!-- @/topicList -->

<!-- @marker "Create Project" -->
<h3 id="CreateProject_">Create Project with Agile Board</h3>
	<p class="blurb">see <a href="https://www.jetbrains.com/help/hub/2017.2/Project-Wizard.html">Project Wizard</a></p>
	<h4 id='AddProjectwithAgileBoard_'>Add Project </h4><ul>
		<li>Hub: create project<ul>
			<li>for project already in GitHub, check VCS for last issue number already used</li>
			<li>create project from Scrum template</li>
			<li>edit custom fields<ul>
				<li>includes edit field names to use camel case for readability<ul>
					<li>Issue Type: Epic, Feature, Task; Bug, Cosmetic, Exception, Usability, Performance</li>
				</ul></li>
			</ul></li>
			<li>edit workflows<ul>
				<li>scrum: do NOT close issue automatically when subtasks completed<ul>
					<li>either do nothing, of put parent issue up for review</li>
				</ul></li>
			</ul></li>
		</ul></li>
		<li><strong>Custom Fields and Workflows</strong></li>
</ul>

<p>see <a href="https://www.jetbrains.com/help/youtrack/standalone/2017.1/Managing-Projects.html">Managing Projects</a></p>
<p>see <a href="https://blog.jetbrains.com/youtrack/2014/03/multi-level-agile-boards-or-how-we-support-epics/">Multi-Level Agile Boards or How We Support Epics
</a></p>

<!-- marker Install Build Agent -->
<h3 id='InstallBuildAgent_'>Install Build Agent</h3><ul>
	<li class="blurb">see <a href="https://confluence.jetbrains.com/display/TCD10/Setting+up+and+Running+Additional+Build+Agents#SettingupandRunningAdditionalBuildAgents-InstallingviaZIPFile">
		Setting up and Running Additional Build Agents: Installing via ZIP file</a></li>
</ul>

<!-- @marker "Command-Line Tools" -->
<h3 id="CommandLineTools_">Command Line Tools</h3>

	<h4>HubRing command line</h4><ul>
		<li><span class="mono">hub.sh</span><ul>
			<li><span class="mono">start</span> Start the HubRing service</li>
			<li><span class="mono">stop</span> Stops the Hub service.</li>
			<li><span class="mono">restart</span> Restarts the Hub service.</li>
			<li><span class="mono">help</span> Displays a list of all commands that can be executed in the command-line interface.</li>
		</ul></li>
	</ul>

	<h4>YouTrack command line</h4><ul>
		<li><span class="mono">youtrack.sh</span> <span class="mono">run</span>: Start YouTrack</li>
	</ul>

	<h4>UpSource commandline</h4><ul>
		<li><span class="mono">upsource.sh</span> <span class="mono">start</span>: Start Upsource</li>
	</ul>

	<h4>TeamCity command line</h4><ul>
		<li><span class="mono">runAll.sh</span>: <span class="mono">start</span>/<span class="mono">stop</span> server and one build agent</li>
		<li><span class="mono">teamcity-server.sh</span>: start/stop server only<ul>
			<li><span class="mono">run</span>: start TeamCity in the current window</li>
			<li><span class="mono">start</span>: start TeamCity in a separate window</li>
			<li><span class="mono">stop</span>: stop TeamCity; wait up to 5 seconds for the process to end</li>
			<li><span class="mono">maintainDB</span>: back up, restore, and migrate the server data<ul>
				<li>see <a href="https://confluence.jetbrains.com/display/TCD10/Creating+Backup+via+maintainDB+command-line+tool">Creating Backup via maintainDB command-line tool</a></li>
			</ul></li>
		</ul></li>
	</ul>

<!-- @marker "Moving to Another Server" -->
<h3 id='MovingServer_'>Moving Projects to Another Server</h3><ul>
	<li>make standard TeamCity backups of existing projects</li>
	<li>see <a href="https://confluence.jetbrains.com/display/TCD9/Projects+Import">Project Import</a> to import into new server</li>
</ul>

<!-- @marker "Sort a Card's Subtasks" -->
<h3 id='SortACardsSubtasks_'>Sort a Card's Subtasks</h3><ul>
	<li>Create a swimlane for the card</li>
	<li>Organize the subtasks in that lane</li>
</ul>

<!-- @marker "JetBrains Adoption" -->
<h2 class="promote">JetBrains Adoption</h2>
<!-- @topicList "JetBrains Adoption" "JetBrainsAdoption_" -->
	<!-- @topicItem "Motivation" "#Motivation_" "0" "" -->
	<!-- @topicItem "JetBrains Team Tools" "#JetBrainsTeamTools_" "0" "" -->
	<!-- @topicItem "Toolbox and IDEs" "#ToolboxandIDEs_" "0" "" -->
	<!-- @topicItem "Costs" "#Costs_" "0" "" -->
<!-- @/topicList -->

<!-- @marker "Motivation" -->
<h4 id='Motivation_'>Motivation</h4>
	<p>We have been using AppCode instead of Xcode for basic development for a little over two years (since Jan 2015).
		The decision to switch to AppCode was motivated by independent advocates, notably <a href="http://qualitycoding.org/start-here/">Jon Reid</a>;
		their top reason was AppCode's refactoring capability in comparison with Xcode, with many other areas where AppCode was better.</p>
	<p>About one year ago, we adopted JetBrains' TeamCity for continuous integration, and Kanban for planning through waffle.io.</p>
	<p>Each of these steps helped us to improve our workflow considerably.</p>
	<p>However, continuous integration frequently finds bugs for which we have a lot of difficulty finding a connection in the code.
		Most of these problems come from legacy code.
		We need better workflow to work more effectively on planning, implementation, and focus for add tasks, and especially with legacy code.</p>
	<p>JetBrains also have tools for Developer and Manager workflow that integrate with each other, with TeamCity, and with the IDE.
		These include Agile planning boards with many advantages over waffle.io.</p>
	<p>JetBrains is a large company with headquarters in St. Petersburg, Russia, and many other locations across Europe and the US.
		They also have a huge installed base of products, all of which receive many kudos for their quality.
		We do not expect them to disappear.</p>

<!-- @marker "JetBrains Team Tools" -->
<h4 id='JetBrainsTeamTools_'>JetBrains Team Tools</h4>
	<p><strong>YouTrack</strong>: Issue tracker for development teams</p>
		<p class="indent">JetBrains system for integrating issues. Links with GitHub.
			Replaces Waffle Kanban board with Agile boards (no scrums required) that also provide a specialized planning board,
			and provide integration with AppCode and other tools.
			Support a single set of Agile boards for all GitHub projects,
			allowing improved planning and prioritization without requiring combination of repos.</p>

	<p><strong>TeamCity</strong>: Powerful Continuous Integration out of the box</p>
		<p class="indent">Continuous Integration we have been comfortabally using.</p>

    <p><strong>UpSource</strong>: Code review and repository browsing</p>
		<p class="indent">Code review is normally done among peers, but we use UpSource to review code from our own multiple perspectives.</p>

	<p><strong>Hub</strong>: JetBrains Tools, integrated</p>

<!-- @marker "Toolbox and IDEs" -->
<h4 id='ToolboxandIDEs_'>Toolbox and IDEs</h4>
	<p>JetBrains provides a large variety of IDEs. We have been happily using their AppCode for Objective-C for a year now.</p>
	<p>At some point, we will probably also be using other languages:</p><ul>
		<li>WebStorm for web development with javascript</li>
		<li>PyCharm, Python with Django, for web development and text processing; also to handle existing (mostly unused) Python code</li>
		<li>DataGrip for data management</li>
		<li>PHPStorm to support a site-wide web searches</li>
		<li>MSL, a DSL development system that could build a DSL for Slates to replace Rez for editing Accessor Slates</li>
	</ul>
	<p>Toolbox is a JetBrains product that provides a control panel for access to all JetBrains IDEs, regardless of language.
		Toolbox would know which of our projects use which IDE, and would also support updating of JetBrains products.</p>

<!-- @marker "Costs" -->
<h4 id='Costs_'>Costs</h4><ul>
	<li>IDEs<ul>
		<li>currently: continuing AppCode subscription: $53/yr</li>
		<li>All-Products Pack: $519 for first year, then $389/yr<ul>
			<li>does not include Team Tools</li>
		</ul></li>
		<li>Given our good experience with AppCode, this clearly makes sense if and when we use enough tools that it becomes cost-effective.</li>
	</ul></li>
	<li>Team Tools for fewer than 10 users:<ul>
		<li>Hub is free</li>
		<li>UpSource is free for 10 or fewer users</li>
		<li>TeamCity<ul>
			<li>free for up to 20 build configurations and 3 build agents (probably enough)</li>
			<li>additional units of 10 build configurations and 1 build agent are $299 per year</li>
		</ul></li>
		<li>YouTrack<ul>
			<li>Standalone, being installed now, version is free</li>
			<li>InCloud hosted version is $200/year, unless no private repositories or they lift that restriction<ul>
				<li>would be needed to have reliable access to Agile Boards from outside our wifi network</li>
				<li>30-day "Cloud Trial" available for InCloud version</li>
			</ul></li>
		</ul></li>
	</ul></li>
</ul>

<!-- @marker "Install TeamTools" -->
<h2 class="promote">Install TeamTools</h2>
	<!-- @topicList "Install TeamTools" "InstallTeamTools_" -->
		<!-- @topicItem "Install TeamTools 2017-06" "#InstallTeamTools2017-06_" "0" "" -->
<!-- @/topicList -->

<p>Installation sections correspond with dates of actual installations, and appear in reverse chronological order.</p>
<p>JetBrains projects are automatically added to any JetBrains Team tools (YouTrack, UpSource, Team City) that are installed in Hub at the time of the installation.
Therefore, install all TeamTools before adding any projects.</p>

<h6>Installation Levels</h6><ul>
	<li>Installation and configuration may be specified at these levels:<ul>
		<li><strong>Basic</strong>: product can be used as intended</li>
		<li><strong>Complete</strong>: complete installation for long-term stability</li>
		<li><strong>Extend</strong>: extensions add additional features</li>
	</ul></li>
</ul>

<!-- @marker "Install TeamTools 2017-06" -->
<h2>Install TeamTools 2017-06</h2>
<!-- @topicList "Install TeamTools 2017-06" "InstallTeamTools2017-06_" -->
	<!-- @topicItem "Basic Team Tools 2017-06" "#BasicTeamTools2017-06_" "0" "" -->
	<!-- @topicItem "Complete Team Tools 2017-06" "#CompleteTeamTools2017-06_" "0" "" -->
	<!-- @topicItem "Extend Team Tools 2017-06" "#ExtendTeamTools2017-06_" "0" "" -->
	<!-- @topicItem "Upgrade Team Tools 2017-06" "#UpgradeTeamTools2017-06_" "0" "" -->
<!-- @/topicList -->

	<!-- @marker "Basic Team Tools 2017-06" -->
	<h3>Basic Team Tools 2017-06</h3>
	<!-- @topicList "Basic Team Tools 2017-06" "BasicTeamTools2017-06_" -->
		<!-- @topicItem "HubRing: Basic 2017-06" "#HubRingBasic2017-06_" "0" "" -->
		<!-- @topicItem "YouTrack: Basic 2017-06" "#YouTrackBasic2017-06_" "0" "" -->
		<!-- @topicItem "UpSource: Basic 2017-06" "#UpSourceBasic2017-06_" "0" "" -->
		<!-- @topicItem "TeamCity: Basic 2017-06" "#TeamCityBasic2017-06_" "0" "" -->
			<!-- @topicItem "Uninstall Team City" "#UninstallTeamCity_" "1" "" -->
	<!-- @/topicList -->

	<!-- @marker "HubRing: Basic 2017-06" -->
	<h4 id="HubRingBasic2017-06_">HubRing: Basic 2017-06</h4><ul>
		<li class="blurb">Try: set backup location in setup; then backup; then configure<ul>
			<li>If that works<ul>
				<li>change others to match</li>
				<li>TeamCity needs to also reset data location before backup</li>
			</ul></li>
			<li class="dq">also: do Team City dependencies actually apply to all products?</li>
		</ul></li>
		<li>download from <a href="https://www.jetbrains.com/hub/download/#section=mac">Hub Download</a><ul>
			<li>Download the *.zip package from Jetbrains</li>
			<li>Place downloaded package in /Volumes/Servers/jb/Hub; expand at that location</li>
			<li><span class="mono">cd &lt;path/to/hub&gt;; bin/hub.sh start</span></li>
			<li>When welcome screen appears, select installation type 'Setup'</li>
			<li>Setup Wizard<ul>
				<li>Select Hub Service<ul>
					<li>set JetBrains password for admin account</li>
				</ul></li>
				<li>Confirm License<ul>
					<li>save license key; confirm License restrictions; 'Finish'</li>
				</ul></li>
				<li>Hub opens; Login as admin; admin/setup menu is on hexagonal nut icon</li>
			</ul></li>
		<li>continue to <a href="#HubRingConfiguration_">HubRing Configuration</a></li>
	</ul></li>
	</ul>

	<!-- @marker "YouTrack: Basic 2017-06" -->
	<h4 id="YouTrackBasic2017-06_">YouTrack: Basic 2017-06</h4><ul>
		<li>Download standalone version from YouTrack Download; compress if not in archive form</li>
		<li>Place *.zip package in /Volumes/Servers/jb/YouTrack; expand at that location</li>
		<li><span class="mono">cd &lt;path/to/YouTrack&gt;/bin; youtrack.sh run</span></li>
		<li>When welcome screen appears, select 'Setup'</li>
		<li>Setup Wizard<ul>
			<li>use External Hub; Hub address http://carols-imac-2.local:8080; verify</li>
			<li>change backup location to '/Volumes/Mavericks-1/JetBrains_backups/YouTrack'</li>
			<li>save license key; 'Finish' to accept login</li>
			<li>'Issues' page opens; initial startup is complete</li>
		</ul></li>
		<li>continue to <a href="#YouTrackConfiguration_">YouTrack Configuration</a></li>
	</ul>

	<!-- @marker "UpSource: Basic 2017-06" -->
	<h4 id="UpSourceBasic2017-06_">UpSource: Basic 2017-06</h4><ul>
		<li>Installation<ul>
			<li>Download the *.zip package from Jetbrains</li>
			<li>Place downloaded package in /Volumes/Servers/jb/UpSource; expand at that location</li>
			<li><span class="mono">cd &lt;path/to/UpSource&gt;/bin; ./upsource.sh run</span></li>
			<li>When welcome screen appears, select 'Setup'</li>
			<li>Setup Wizard<ul>
				<li>use External Hub; Hub address http://carols-imac-2.local:8080/hub/; verify</li>
				<li>change backup location to '/Volumes/Mavericks-1/JetBrains_backups/UpSource</li>
				<li>save license key; 'Finish' to accept login</li>
				<li>'Users' page opens; initial startup is complete</li>
			</ul></li>
		</ul></li>
		<li>continue to <a href="#UpSourceConfiguration_">UpSource Configuration</a></li>
	</ul>

	<!-- @marker "TeamCity: Basic 2017-06" -->
	<h4 id="TeamCityBasic2017-06_">TeamCity: Basic 2017-06</h4><ul>
		<li style="padding-top: 10px;"><strong>Provide Dependencies</strong><ul>
			<li>install or check for updates as indicated:<ul>
				<li class="blurb">see also<a href="https://confluence.jetbrains.com/display/TCD10/Supported+Platforms+and+Environments">
					Supported Platforms and Environments</a></li>
				<li><a href="Tools.html#_gnutar">gnu-tar</a>; execute with <span class="mono">gtar</span></li>
				<li><a href="Tools.html#_Java">Java</a></li>
			</ul></li>
		</ul></li>
		<li style="padding-top: 10px;"><strong>Unpack Archive</strong><ul>
			<li>download from <a href="https://www.jetbrains.com/teamcity/download/">TeamCity downloads</a></li>
			<li>move archive to /Volumes/Servers/jb/TeamCity; archive location will become TeamCity home directory</li>
			<li>Unpack Archive<ul>
				<li class="mono">cd /Volumes/Servers/jb/TeamCity</li>
				<li>unzip archive using gnu-tar:&nbsp;&nbsp;<span class='mono'><span class="prompt">$ </span>sudo gtar xf &lt;archive&gt;</span></li>
			</ul></li>
		</ul></li>
		<li style="padding-top: 10px;"><strong>Start TeamCity Server</strong><ul>
			<li>open http://localhost:8111; will not show content yet</li>
			<li>start, including one default BuildServer:<ul>
				<li><span class='mono'><span class="prompt">$ </span>cd /Volumes/Servers/jb/TeamCity/TeamCity/</span></li>
				<li><span class='mono'><span class="prompt">$ </span>./bin/runAll.sh start</span></li>
				<li class="blurb">should show short log in Terminal, TeamCity startup window at localhost:8111</li>
				<li><span style="color: crimson">WARNING</span>: DO NOT enter main TeamCity webapp</li>
			</ul></li>
			<li>verify that localhost:8111 shows TeamCity startup page<ul>
				<li>refresh if necessary</li>
			</ul></li>
			<li><span style="color: crimson">STOP</span> TeamCity: <span class='mono'><span class="prompt">$ </span>./bin/runAll.sh stop</span></li>
		</ul></li>

		<li style="padding-top: 10px;"><strong>Set TeamCity's Data Directory</strong><ul>
			<li>Create New File for Startup Properties<ul>
				<li class="mono">echo "teamcity.data.path=/Volumes/Servers/jb/TeamCity/BuildServer"
					> /Volumes/Servers/jb/TeamCity/TeamCity/conf/teamcity-startup.properties</li>
			</ul></li>
		</ul></li>
	</ul>

	<h4 id='UninstallTeamCity_'>Uninstall TeamCity</h4><ul>
		<li>Activity Monitor: terminate any active TeamCity process(es)<ul>
			<li>open Activity Monitor; show all process</li>
			<li>for any processes except TeamCity associated with TeamCity, 'quit' using button at top left</li>
		</ul></li>
		<li>quit TeamCity:&nbsp;&nbsp;<span class='mono'><span class="prompt">$ </span>mysqladmin -u root -p shutdown</span></li>
		<li>from /Library/LaunchDeamons, delete jetbrains.teamcity.server.plist</li>
		<li>delete TeamCity application from /Volumes/TeamCity</li>
		<li>delete /Application Support/TeamCityIntegration</li>
		<li>delete BuildServer data (/Volumes/TeamCity/TeamCityDB/.BuildServer or ~/.BuildServer)</li>
		<li>look in user and top-level folders "Application Support", Preferences, Caches for files to delete</li>
	</ul>

<!-- @marker "Complete Team Tools 2017-06" -->
<h3>Complete Team Tools 2017-06</h3>
<!-- @topicList "Complete Team Tools 2017-06" "CompleteTeamTools2017-06_" -->
	<!-- @topicItem "HubRing: Complete 2017-06" "#HubRingComplete2017-06_" "0" "" -->
	<!-- @topicItem "YouTrack: Complete 2017-06" "#YouTrackComplete2017-06_" "0" "" -->
	<!-- @topicItem "UpSource: Complete 2017-06" "#UpSourceComplete2017-06_" "0" "" -->
	<!-- @topicItem "TeamCity: Complete 2017-06" "#TeamCityComplete2017-06_" "0" "" -->
<!-- @/topicList -->

<!-- @marker "HubRing: Complete 2017-06" -->
<h4 id="HubRingComplete2017-06_">HubRing: Complete 2017-06</h4>

<!-- @marker "YouTrack: Complete 2017-06" -->
<h4 id="YouTrackComplete2017-06_">YouTrack: Complete 2017-06</h4>

<!-- @marker "UpSource: Complete 2017-06" -->
<h4 id="UpSourceComplete2017-06_">UpSource: Complete 2017-06</h4>

<!-- @marker "TeamCity: Complete 2017-06" -->
<h4 id="TeamCityComplete2017-06_">TeamCity: Complete 2017-06</h4><div class="indent">
	<ul>
		<li id="AutostartServer_"><strong>Autostart TeamCity Server></strong><ul>
			<li>create AutoStart file ~/Dev/DevSupport/Developer/Developer/Developer/JetBrains/jetbrains.teamcity.server.plist as specified in
				<a href="https://confluence.jetbrains.com/display/TCD6/Autostart+TeamCity+on+Mac">Autostart TeamCity on Mac</a><ul>
					<li>Working Directory: /Volumes/Servers/jb/TeamCity/TeamCity</li>
				</ul></li>
			<li>copy file jetbrains.teamcity.server.plist to ~/Library/LaunchDaemons</li>
			<li>restart computer</li>
			<li>Safari: localhost:8111 should show TeamCity window</li>
		</ul></li>
		<li id="SetTeamCitysDataDirectory_"><strong>Set TeamCity's Data Directory</strong><ul>
			<li>Create New File for Startup Properties<ul>
				<li class="mono">echo "teamcity.data.path=/Volumes/Servers/jb/TeamCity/BuildServer"
					&gt; /Volumes/Servers/jb/TeamCity/TeamCity/conf/teamcity-startup.properties</li>
			</ul></li>
		</ul></li>
		<li><a href="MySQL.html#InstallandSetUpMySQL_"><strong>Install and Set Up MySQL</strong></a><ul>
			<li>includes install; initialize data directory; test; secure initial accounts</li>
		</ul></li>
	</ul>
	<h5>Move to External Database</h5><ul>
		<li style="padding-top: 10px;"><strong>Install and Set Up MySQL</strong><ul>
			<li class="blurb">includes install; initialize data directory; test; secure initial accounts</li>
			<li><a href="MySQL.html#InstallandSetUpMySQL_">Install and Set Up MySQL</a></li>
		</ul></li>
		<li style="padding-top: 10px;">Integrate MySQL and TeamCity Servers<ul>
			<li>MySQL server side<ul>
				<li><a href="MySQL.html#ConfigurethisMySQLServerforTeamCity_">Configure this MySQL Server for TeamCity</a></li>
			</ul></li>
			<li>TeamCity server side<ul>
				<li>install <a href="Tools.html#_Connector_J">Tools: Connector/J</a></li>
			</ul></li>
	</ul>

	<!-- @marker "Create TeamCityDB" -->
	<h4 id='CreateTeamCityDB_'>Create TeamCityDB</h4><ul>
		<li>create TeamCity database<ul>
			<li><a href="MySQL.html#CreateTeamCityDatabase_">create</a> MySQL database TeamCityDB with user carolclark</li>
		</ul></li>
		<li style="padding-top: 10px;"><strong>Open WebApp; Initial Configuration</strong><ul>
			<li class="blurb">localhost:8111</li>
			<li>user: carolclark; password</li>
			<li>verify TeamCity data path: /Volumes/Servers/jb/TeamCity/BuildServer</li>
			<li>startup page configuration<ul>
				<li><strong>smtp</strong>: smpt host: smpt.cox.net; send from carolclark@cox.net; login: carolclark@cox.net; cox password; test connection</li>
				<li><strong>license</strong>: verify license for 3 build agents, 20 build configurations</li>
				<li><strong>user</strong>: username: carolclark; name: Carol Clark: pw:jetbrains; grant administrator privileges</li>
			</ul></li>
			<li>click user name for profile page<ul>
				<li>user name and email</li>
				<li>UISettings: Highlight my changes and investigations: ON; Show date/time in my timezone: turn ON;
					Show all personal builds: turn ON; Add builds triggered by me to favorites: ON (experiment)</li>
				<li>VCS User Names: add carolclark@cox.net</li>
			</ul></li>
			<li>Administration<ul>
				<li>configure backups *WARNING* backups currently not run automatically</li>
			</ul></li>
			<li>build number: &lt;version&gt;.b%build.counter%</li>
		</ul></li>

		<li style="padding-top: 10px;"><strong>Prevent Creation of Dummy Admin User</strong><ul>
			<li class="mono">echo "teamcity.installation.completed=true" >> /Volumes/Servers/jb/TeamCity/TeamCity/conf/teamcity-startup.properties</li>
		</ul></li>
	</ul></li>
	</ul>
</div>

<!-- @marker "Extend Team Tools 2017-06" -->
<h3>Extend Team Tools 2017-06</h3>
<!-- @topicList "Extend Team Tools 2017-06" "ExtendTeamTools2017-06_" -->
<!-- @topicItem "HubRing: Extend 2017-06" "#HubRingExtend2017-06_" "0" "" -->
<!-- @topicItem "YouTrack: Extend 2017-06" "#YouTrackExtend2017-06_" "0" "" -->
<!-- @topicItem "UpSource: Extend 2017-06" "#UpSourceExtend2017-06_" "0" "" -->
<!-- @topicItem "TeamCity: Extend 2017-06" "#TeamCityExtend2017-06_" "0" "" -->
<!-- @/topicList -->

<!-- @marker "HubRing: Extend 2017-06" -->
<h4 id="HubRingExtend2017-06_">HubRing: Extend 2017-06</h4>

<!-- @marker "YouTrack: Extend 2017-06" -->
<h4 id="YouTrackExtend2017-06_">YouTrack: Extend 2017-06</h4>
	<h5>Time Tracking</h5><ul>
		<li><em>see <a href="https://www.jetbrains.com/help/youtrack/standalone/2017.1/Extending_YouTrack.html">Extending YouTrack</a>; YouTrack Integration Plugin <strong>required</strong> for all extensions</em></li>
		<li><a href="https://www.jetbrains.com/help/youtrack/standalone/2017.1/Integration-with-IDE.html">JetBrains IDE extensions</a><ul>
			<li><em>includes Issue Navigation, Task Management, Time Tracking</em></li>
		</ul></li>
		<li><a href="https://www.jetbrains.com/help/youtrack/standalone/2017.1/TMetric-Integration.html">TMetric (work timer) integration</a></li>
	</ul>

	<h5>configure Java virtual machine (JVM)</h5><ul>
		<li class="blurb">may be needed to support some later extension</li>
		<li>stop YouTrack service<ul>
			<li><span class="mono">cd &lt;path/to/YouTrack&gt;; bin/youtrack.sh stop</span></li>
			<li>check Activity Monitor for other "YouTrack" processes; kill if found</li>
		</ul></li>
		<li>if necessary, create file youtrack.jvmoptions<ul>
			<li>copy "&lt;YouTrackDirectory&gt;/conf/youtrack.jvmoptions.dist" to Jetbrains/YouTrack/youtrack.jvmoptions</li>
			<li>configure JVM<ul>
				<li><span class="mono">Maximum Metaspace memory: -XX:MaxMetaspaceSize 250m</span></li>
				<li><span class="mono">Maximum Java heap size: -Xmx 1024m or 1g</span> </li>
				<li>also if needed for performance:<ul>
					<li><span class="mono">Minimum Metaspace memory: -XX:MetaspaceSize 250m</span> </li>
				</ul></li>
			</ul></li>
			<li>configure general options<ul>
				<li>jetbrains.youtrack.mailLimit: 25</li>
				<li>for additional configuration options, see
					<a href="https://www.jetbrains.com/help/youtrack/standalone/2017.1/YouTrack-Java-Start-Parameters.html">General Parameters</a></li>
			</ul></li>
			<li>On the Confirm Settings page, confirm or change the basic system settings.</li>
		</ul></li>
		<li>install youtrack.jvmoptions @ &lt;path/to/YouTrack&gt;/conf</li>
		<li>start YouTrack service: <span class="mono">cd &lt;path/to/YouTrack&gt;; bin/youtrack.sh start</span></li>
	</ul>


	<!-- @marker "UpSource: Extend 2017-06" -->
<h4 id="UpSourceExtend2017-06_">UpSource: Extend 2017-06</h4>

<!-- @marker "TeamCity: Extend 2017-06" -->
<h4 id="TeamCityExtend2017-06_">TeamCity: Extend 2017-06</h4>

<!-- @marker "Upgrade Team Tools 2017-06" -->
<h3>Upgrade Team Tools 2017-06</h3>
<!-- @topicList "Upgrade Team Tools 2017-06" "UpgradeTeamTools2017-06_" -->
	<!-- @topicItem "HubRing Upgrade 2017-06" "#HubRingUpgrade2017-06_" "0" "" -->
<!-- @/topicList -->

<!-- @marker "HubRing Upgrade 2017-06" -->
<h4 id="HubRingUpgrade2017-06_">HubRing Upgrade 2017-06</h4>
	<p>see https://www.jetbrains.com/help/hub &gt; Installation and Upgrade &gt; Upgrade Hub</p>
	<ul>
		<li>Server Settings > Backup > Backup Database</li>
		<li>hubring stop</li>
		<li>append date to name of existing installation</li>
		<li>compress existing installation; move to Replaced</li>
		<li>Activity Monitor: search for Hub processes; stop any found</li>
		<li>verify folder HubRing contains no old files</li>
		<li>download zip distribution; cd to folder jb/HubRing; extract</li>
		<li>change alias hubring to match new version name</li>
		<li>hubring run</li>
		<li>Setup Wizard<ul>
			<li>Select Installation Type: Upgrade</li>
			<li>Select Upgrade Source: latest matching backup from /Volumes/Mavericks-1/jetbrainsBackups</li>
			<li>Confirm Settings: set backup location to /Volumes/Mavericks-1/jetbrainsBackups<ul>
				<li>Upgrade; login as admin</li>
			</ul></li>
		</ul></li>
		<li>.bashrc: change version string in &lt;tool&gt; alias</li>
	</ul>

<p><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
	<br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
	<br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
	<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /></p>
<hr class='footer' />
<p class='footer'>Copyright (c) 2017 C &amp; C Software, Inc. All rights reserved.</p>
</body>
</html>
